

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Estimating local and global feature importance scores using DiCE &mdash; DiCE 0.12 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css?v=2aa19091" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=3f949d3d"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Generating counterfactuals for multi-class classification and regression models" href="DiCE_multiclass_classification_and_regression.html" />
    <link rel="prev" title="Quick introduction to generating counterfactual explanations using DiCE" href="DiCE_getting_started.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            DiCE
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../readme.html">Diverse Counterfactual Explanations (DiCE) for ML</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Notebooks:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="DiCE_getting_started.html">Quick introduction to generating counterfactual explanations using DiCE</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Estimating local and global feature importance scores using DiCE</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Preliminaries:-Loading-the-data-and-ML-model">Preliminaries: Loading the data and ML model</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Local-feature-importance">Local feature importance</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Global-importance">Global importance</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Convert-the-counterfactual-output-to-json">Convert the counterfactual output to json</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Convert-the-json-output-to-a-counterfactual-object">Convert the json output to a counterfactual object</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="DiCE_multiclass_classification_and_regression.html">Generating counterfactuals for multi-class classification and regression models</a></li>
<li class="toctree-l1"><a class="reference internal" href="DiCE_multiclass_classification_and_regression.html#Regression">Regression</a></li>
<li class="toctree-l1"><a class="reference internal" href="DiCE_model_agnostic_CFs.html">Generating counterfactual explanations with any ML model</a></li>
<li class="toctree-l1"><a class="reference internal" href="DiCE_with_private_data.html">Generating counterfactual explanations without access to training data</a></li>
<li class="toctree-l1"><a class="reference internal" href="DiCE_with_advanced_options.html">Advanced options to customize Counterfactual Explanations</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Package:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dice_ml.html">dice_ml package</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DiCE</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="nb_index.html">&lt;no title&gt;</a></li>
      <li class="breadcrumb-item active">Estimating local and global feature importance scores using DiCE</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/notebooks/DiCE_feature_importances.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Estimating-local-and-global-feature-importance-scores-using-DiCE">
<h1>Estimating local and global feature importance scores using DiCE<a class="headerlink" href="#Estimating-local-and-global-feature-importance-scores-using-DiCE" title="Link to this heading"></a></h1>
<p>Summaries of counterfactual examples can be used to estimate importance of features. Intuitively, a feature that is changed more often to generate a proximal counterfactual is an important feature. We use this intuition to build a feature importance score.</p>
<p>This score can be interpreted as a measure of the <strong>necessity</strong> of a feature to cause a particular model output. That is, if the feature’s value changes, then it is likely that the model’s output class will also change (or the model’s output will significantly change in case of regression model).</p>
<p>Below we show how counterfactuals can be used to provide local feature importance scores for any input, and how those scores can be combined to yield a global importance score for each feature.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.compose</span><span class="w"> </span><span class="kn">import</span> <span class="n">ColumnTransformer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.model_selection</span><span class="w"> </span><span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.pipeline</span><span class="w"> </span><span class="kn">import</span> <span class="n">Pipeline</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.preprocessing</span><span class="w"> </span><span class="kn">import</span> <span class="n">StandardScaler</span><span class="p">,</span> <span class="n">OneHotEncoder</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.ensemble</span><span class="w"> </span><span class="kn">import</span> <span class="n">RandomForestClassifier</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">dice_ml</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dice_ml</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dice</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dice_ml.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">helpers</span>  <span class="c1"># helper functions</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2
</pre></div>
</div>
</div>
<section id="Preliminaries:-Loading-the-data-and-ML-model">
<h2>Preliminaries: Loading the data and ML model<a class="headerlink" href="#Preliminaries:-Loading-the-data-and-ML-model" title="Link to this heading"></a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">load_adult_income_dataset</span><span class="p">()</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>  <span class="c1"># downsampling to reduce ML model fitting time</span>
<span class="n">helpers</span><span class="o">.</span><span class="n">get_adult_data_info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/mnt/c/Users/amshar/code/dice/dice_ml/utils/helpers.py:79: FutureWarning: Downcasting behavior in `replace` is deprecated and will be removed in a future version. To retain the old behavior, explicitly call `result.infer_objects(copy=False)`. To opt-in to the future behavior, set `pd.set_option(&#39;future.no_silent_downcasting&#39;, True)`
  adult_data = adult_data.replace({&#39;income&#39;: {&#39;&lt;=50K&#39;: 0, &#39;&gt;50K&#39;: 1}})
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;age&#39;: &#39;age&#39;,
 &#39;workclass&#39;: &#39;type of industry (Government, Other/Unknown, Private, Self-Employed)&#39;,
 &#39;education&#39;: &#39;education level (Assoc, Bachelors, Doctorate, HS-grad, Masters, Prof-school, School, Some-college)&#39;,
 &#39;marital_status&#39;: &#39;marital status (Divorced, Married, Separated, Single, Widowed)&#39;,
 &#39;occupation&#39;: &#39;occupation (Blue-Collar, Other/Unknown, Professional, Sales, Service, White-Collar)&#39;,
 &#39;race&#39;: &#39;white or other race?&#39;,
 &#39;gender&#39;: &#39;male or female?&#39;,
 &#39;hours_per_week&#39;: &#39;total work hours per week&#39;,
 &#39;income&#39;: &#39;0 (&lt;=50K) vs 1 (&gt;50K)&#39;}
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">target</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="s2">&quot;income&quot;</span><span class="p">]</span>

<span class="c1"># Split data into train and test</span>
<span class="n">datasetX</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;income&quot;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">x_train</span><span class="p">,</span> <span class="n">x_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">datasetX</span><span class="p">,</span>
                                                    <span class="n">target</span><span class="p">,</span>
                                                    <span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
                                                    <span class="n">random_state</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                                    <span class="n">stratify</span><span class="o">=</span><span class="n">target</span><span class="p">)</span>

<span class="n">numerical</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;age&quot;</span><span class="p">,</span> <span class="s2">&quot;hours_per_week&quot;</span><span class="p">]</span>
<span class="n">categorical</span> <span class="o">=</span> <span class="n">x_train</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">numerical</span><span class="p">)</span>

<span class="c1"># We create the preprocessing pipelines for both numeric and categorical data.</span>
<span class="n">numeric_transformer</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[</span>
    <span class="p">(</span><span class="s1">&#39;scaler&#39;</span><span class="p">,</span> <span class="n">StandardScaler</span><span class="p">())])</span>

<span class="n">categorical_transformer</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[</span>
    <span class="p">(</span><span class="s1">&#39;onehot&#39;</span><span class="p">,</span> <span class="n">OneHotEncoder</span><span class="p">(</span><span class="n">handle_unknown</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">))])</span>

<span class="n">transformations</span> <span class="o">=</span> <span class="n">ColumnTransformer</span><span class="p">(</span>
    <span class="n">transformers</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;num&#39;</span><span class="p">,</span> <span class="n">numeric_transformer</span><span class="p">,</span> <span class="n">numerical</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;cat&#39;</span><span class="p">,</span> <span class="n">categorical_transformer</span><span class="p">,</span> <span class="n">categorical</span><span class="p">)])</span>

<span class="c1"># Append classifier to preprocessing pipeline.</span>
<span class="c1"># Now we have a full prediction pipeline.</span>
<span class="n">clf</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;preprocessor&#39;</span><span class="p">,</span> <span class="n">transformations</span><span class="p">),</span>
                      <span class="p">(</span><span class="s1">&#39;classifier&#39;</span><span class="p">,</span> <span class="n">RandomForestClassifier</span><span class="p">())])</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">x_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="n">dice_ml</span><span class="o">.</span><span class="n">Data</span><span class="p">(</span><span class="n">dataframe</span><span class="o">=</span><span class="n">dataset</span><span class="p">,</span> <span class="n">continuous_features</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;hours_per_week&#39;</span><span class="p">],</span> <span class="n">outcome_name</span><span class="o">=</span><span class="s1">&#39;income&#39;</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">dice_ml</span><span class="o">.</span><span class="n">Model</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="s2">&quot;sklearn&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Local-feature-importance">
<h2>Local feature importance<a class="headerlink" href="#Local-feature-importance" title="Link to this heading"></a></h2>
<p>We first generate counterfactuals for a given input point.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">exp</span> <span class="o">=</span> <span class="n">Dice</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;random&quot;</span><span class="p">)</span>
<span class="n">query_instance</span> <span class="o">=</span> <span class="n">x_train</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="n">e1</span> <span class="o">=</span> <span class="n">exp</span><span class="o">.</span><span class="n">generate_counterfactuals</span><span class="p">(</span><span class="n">query_instance</span><span class="p">,</span> <span class="n">total_CFs</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">desired_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                  <span class="n">desired_class</span><span class="o">=</span><span class="s2">&quot;opposite&quot;</span><span class="p">,</span>
                                  <span class="n">permitted_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">features_to_vary</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">)</span>
<span class="n">e1</span><span class="o">.</span><span class="n">visualize_as_dataframe</span><span class="p">(</span><span class="n">show_only_changes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
100%|█████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00&lt;00:00,  1.78it/s]
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Query instance (original outcome : 1)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>workclass</th>
      <th>education</th>
      <th>marital_status</th>
      <th>occupation</th>
      <th>race</th>
      <th>gender</th>
      <th>hours_per_week</th>
      <th>income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>51</td>
      <td>Self-Employed</td>
      <td>Masters</td>
      <td>Married</td>
      <td>White-Collar</td>
      <td>White</td>
      <td>Male</td>
      <td>50</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Diverse Counterfactual set (new outcome: 0)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>workclass</th>
      <th>education</th>
      <th>marital_status</th>
      <th>occupation</th>
      <th>race</th>
      <th>gender</th>
      <th>hours_per_week</th>
      <th>income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>67</td>
      <td>-</td>
      <td>School</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-</td>
      <td>-</td>
      <td>Assoc</td>
      <td>Single</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-</td>
      <td>-</td>
      <td>Assoc</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>96</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-</td>
      <td>-</td>
      <td>Assoc</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>95</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-</td>
      <td>Government</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>27</td>
      <td>0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>Blue-Collar</td>
      <td>-</td>
      <td>-</td>
      <td>64</td>
      <td>0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>27</td>
      <td>Other/Unknown</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>-</td>
      <td>-</td>
      <td>School</td>
      <td>Divorced</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>Separated</td>
      <td>-</td>
      <td>-</td>
      <td>Female</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>-</td>
      <td>-</td>
      <td>HS-grad</td>
      <td>-</td>
      <td>-</td>
      <td>Other</td>
      <td>-</td>
      <td>-</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>These can now be used to calculate the feature importance scores.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">imp</span> <span class="o">=</span> <span class="n">exp</span><span class="o">.</span><span class="n">local_feature_importance</span><span class="p">(</span><span class="n">query_instance</span><span class="p">,</span> <span class="n">cf_examples_list</span><span class="o">=</span><span class="n">e1</span><span class="o">.</span><span class="n">cf_examples_list</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">imp</span><span class="o">.</span><span class="n">local_importance</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[{&#39;education&#39;: 0.6, &#39;hours_per_week&#39;: 0.4, &#39;marital_status&#39;: 0.3, &#39;workclass&#39;: 0.2, &#39;age&#39;: 0.2, &#39;occupation&#39;: 0.1, &#39;race&#39;: 0.1, &#39;gender&#39;: 0.1}]
</pre></div></div>
</div>
<p>Feature importance can also be estimated directly, by leaving the <code class="docutils literal notranslate"><span class="pre">cf_examples_list</span></code> argument blank.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">imp</span> <span class="o">=</span> <span class="n">exp</span><span class="o">.</span><span class="n">local_feature_importance</span><span class="p">(</span><span class="n">query_instance</span><span class="p">,</span> <span class="n">posthoc_sparsity_param</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">imp</span><span class="o">.</span><span class="n">local_importance</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
100%|█████████████████████████████████████████████████████████████████████████████████████| 1/1 [00:00&lt;00:00,  7.13it/s]
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[{&#39;age&#39;: 0.5, &#39;education&#39;: 0.4, &#39;marital_status&#39;: 0.4, &#39;hours_per_week&#39;: 0.3, &#39;occupation&#39;: 0.2, &#39;workclass&#39;: 0.1, &#39;gender&#39;: 0.1, &#39;race&#39;: 0.0}]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>

</pre></div></div>
</div>
</section>
<section id="Global-importance">
<h2>Global importance<a class="headerlink" href="#Global-importance" title="Link to this heading"></a></h2>
<p>For global importance, we need to generate counterfactuals for a representative sample of the dataset.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cobj</span> <span class="o">=</span> <span class="n">exp</span><span class="o">.</span><span class="n">global_feature_importance</span><span class="p">(</span><span class="n">x_train</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">],</span> <span class="n">total_CFs</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">posthoc_sparsity_param</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cobj</span><span class="o">.</span><span class="n">summary_importance</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
100%|███████████████████████████████████████████████████████████████████████████████████| 10/10 [00:01&lt;00:00,  5.47it/s]
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;education&#39;: 0.52, &#39;age&#39;: 0.49, &#39;hours_per_week&#39;: 0.35, &#39;marital_status&#39;: 0.23, &#39;occupation&#39;: 0.18, &#39;workclass&#39;: 0.11, &#39;gender&#39;: 0.1, &#39;race&#39;: 0.09}
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>

</pre></div></div>
</div>
</section>
<section id="Convert-the-counterfactual-output-to-json">
<h2>Convert the counterfactual output to json<a class="headerlink" href="#Convert-the-counterfactual-output-to-json" title="Link to this heading"></a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">json_str</span> <span class="o">=</span> <span class="n">cobj</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#34;test_data&#34;: [[[47, &#34;Other/Unknown&#34;, &#34;Bachelors&#34;, &#34;Married&#34;, &#34;Other/Unknown&#34;, &#34;White&#34;, &#34;Male&#34;, 36, 1]], [[51, &#34;Self-Employed&#34;, &#34;Masters&#34;, &#34;Married&#34;, &#34;White-Collar&#34;, &#34;White&#34;, &#34;Male&#34;, 50, 1]], [[38, &#34;Self-Employed&#34;, &#34;HS-grad&#34;, &#34;Married&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Male&#34;, 80, 0]], [[66, &#34;Other/Unknown&#34;, &#34;HS-grad&#34;, &#34;Married&#34;, &#34;Other/Unknown&#34;, &#34;White&#34;, &#34;Female&#34;, 20, 0]], [[32, &#34;Private&#34;, &#34;HS-grad&#34;, &#34;Married&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Male&#34;, 60, 1]], [[74, &#34;Other/Unknown&#34;, &#34;Bachelors&#34;, &#34;Widowed&#34;, &#34;Other/Unknown&#34;, &#34;Other&#34;, &#34;Female&#34;, 35, 0]], [[26, &#34;Private&#34;, &#34;HS-grad&#34;, &#34;Single&#34;, &#34;White-Collar&#34;, &#34;White&#34;, &#34;Female&#34;, 40, 0]], [[27, &#34;Self-Employed&#34;, &#34;HS-grad&#34;, &#34;Single&#34;, &#34;Sales&#34;, &#34;White&#34;, &#34;Male&#34;, 45, 0]], [[36, &#34;Private&#34;, &#34;Some-college&#34;, &#34;Married&#34;, &#34;Blue-Collar&#34;, &#34;White&#34;, &#34;Male&#34;, 60, 1]], [[32, &#34;Private&#34;, &#34;Assoc&#34;, &#34;Single&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Female&#34;, 60, 0]]], &#34;cfs_list&#34;: [[[23, &#34;Other/Unknown&#34;, &#34;Bachelors&#34;, &#34;Married&#34;, &#34;Other/Unknown&#34;, &#34;Other&#34;, &#34;Male&#34;, 36, 0], [47, &#34;Other/Unknown&#34;, &#34;Bachelors&#34;, &#34;Married&#34;, &#34;Other/Unknown&#34;, &#34;Other&#34;, &#34;Male&#34;, 12, 0], [47, &#34;Other/Unknown&#34;, &#34;Bachelors&#34;, &#34;Separated&#34;, &#34;Other/Unknown&#34;, &#34;White&#34;, &#34;Male&#34;, 55, 0], [28, &#34;Other/Unknown&#34;, &#34;Bachelors&#34;, &#34;Separated&#34;, &#34;Other/Unknown&#34;, &#34;White&#34;, &#34;Male&#34;, 36, 0], [64, &#34;Other/Unknown&#34;, &#34;Bachelors&#34;, &#34;Widowed&#34;, &#34;Other/Unknown&#34;, &#34;White&#34;, &#34;Male&#34;, 36, 0], [47, &#34;Other/Unknown&#34;, &#34;School&#34;, &#34;Married&#34;, &#34;Other/Unknown&#34;, &#34;White&#34;, &#34;Male&#34;, 96, 0], [47, &#34;Other/Unknown&#34;, &#34;School&#34;, &#34;Married&#34;, &#34;Other/Unknown&#34;, &#34;White&#34;, &#34;Male&#34;, 34, 0], [47, &#34;Other/Unknown&#34;, &#34;HS-grad&#34;, &#34;Widowed&#34;, &#34;Other/Unknown&#34;, &#34;White&#34;, &#34;Male&#34;, 36, 0], [47, &#34;Other/Unknown&#34;, &#34;Bachelors&#34;, &#34;Single&#34;, &#34;Other/Unknown&#34;, &#34;White&#34;, &#34;Male&#34;, 73, 0], [19, &#34;Other/Unknown&#34;, &#34;Bachelors&#34;, &#34;Separated&#34;, &#34;Other/Unknown&#34;, &#34;White&#34;, &#34;Male&#34;, 36, 0]], [[51, &#34;Self-Employed&#34;, &#34;HS-grad&#34;, &#34;Married&#34;, &#34;Blue-Collar&#34;, &#34;White&#34;, &#34;Male&#34;, 50, 0], [28, &#34;Self-Employed&#34;, &#34;Masters&#34;, &#34;Married&#34;, &#34;White-Collar&#34;, &#34;White&#34;, &#34;Female&#34;, 50, 0], [51, &#34;Self-Employed&#34;, &#34;School&#34;, &#34;Married&#34;, &#34;White-Collar&#34;, &#34;Other&#34;, &#34;Male&#34;, 50, 0], [51, &#34;Self-Employed&#34;, &#34;Masters&#34;, &#34;Married&#34;, &#34;Blue-Collar&#34;, &#34;White&#34;, &#34;Male&#34;, 24, 0], [21, &#34;Self-Employed&#34;, &#34;Masters&#34;, &#34;Married&#34;, &#34;Other/Unknown&#34;, &#34;White&#34;, &#34;Male&#34;, 50, 0], [51, &#34;Self-Employed&#34;, &#34;Masters&#34;, &#34;Widowed&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Male&#34;, 50, 0], [28, &#34;Self-Employed&#34;, &#34;Bachelors&#34;, &#34;Married&#34;, &#34;White-Collar&#34;, &#34;White&#34;, &#34;Male&#34;, 50, 0], [51, &#34;Self-Employed&#34;, &#34;Masters&#34;, &#34;Separated&#34;, &#34;Blue-Collar&#34;, &#34;White&#34;, &#34;Male&#34;, 50, 0], [51, &#34;Self-Employed&#34;, &#34;HS-grad&#34;, &#34;Married&#34;, &#34;White-Collar&#34;, &#34;Other&#34;, &#34;Male&#34;, 50, 0], [85, &#34;Self-Employed&#34;, &#34;Masters&#34;, &#34;Single&#34;, &#34;White-Collar&#34;, &#34;White&#34;, &#34;Male&#34;, 50, 0]], [[78, &#34;Self-Employed&#34;, &#34;Some-college&#34;, &#34;Married&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Male&#34;, 80, 1], [38, &#34;Self-Employed&#34;, &#34;Masters&#34;, &#34;Married&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Male&#34;, 87, 1], [38, &#34;Self-Employed&#34;, &#34;Doctorate&#34;, &#34;Married&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Male&#34;, 86, 1], [38, &#34;Self-Employed&#34;, &#34;Some-college&#34;, &#34;Married&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Male&#34;, 90, 1], [77, &#34;Self-Employed&#34;, &#34;Masters&#34;, &#34;Married&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Male&#34;, 80, 1], [87, &#34;Self-Employed&#34;, &#34;HS-grad&#34;, &#34;Married&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Male&#34;, 61, 1], [78, &#34;Self-Employed&#34;, &#34;HS-grad&#34;, &#34;Married&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Male&#34;, 63, 1], [38, &#34;Self-Employed&#34;, &#34;Doctorate&#34;, &#34;Married&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Male&#34;, 80, 1], [38, &#34;Self-Employed&#34;, &#34;Masters&#34;, &#34;Married&#34;, &#34;White-Collar&#34;, &#34;White&#34;, &#34;Male&#34;, 80, 1], [38, &#34;Self-Employed&#34;, &#34;Masters&#34;, &#34;Married&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Male&#34;, 65, 1]], [[66, &#34;Other/Unknown&#34;, &#34;Doctorate&#34;, &#34;Married&#34;, &#34;Other/Unknown&#34;, &#34;White&#34;, &#34;Female&#34;, 20, 1], [66, &#34;Other/Unknown&#34;, &#34;Doctorate&#34;, &#34;Married&#34;, &#34;White-Collar&#34;, &#34;White&#34;, &#34;Female&#34;, 20, 1], [66, &#34;Other/Unknown&#34;, &#34;Doctorate&#34;, &#34;Married&#34;, &#34;Other/Unknown&#34;, &#34;White&#34;, &#34;Female&#34;, 15, 1], [37, &#34;Other/Unknown&#34;, &#34;Some-college&#34;, &#34;Married&#34;, &#34;Other/Unknown&#34;, &#34;White&#34;, &#34;Female&#34;, 20, 1], [66, &#34;Other/Unknown&#34;, &#34;Doctorate&#34;, &#34;Widowed&#34;, &#34;Other/Unknown&#34;, &#34;White&#34;, &#34;Female&#34;, 20, 1], [73, &#34;Other/Unknown&#34;, &#34;Doctorate&#34;, &#34;Married&#34;, &#34;Other/Unknown&#34;, &#34;White&#34;, &#34;Female&#34;, 20, 1], [56, &#34;Other/Unknown&#34;, &#34;HS-grad&#34;, &#34;Married&#34;, &#34;Other/Unknown&#34;, &#34;White&#34;, &#34;Female&#34;, 40, 1], [66, &#34;Other/Unknown&#34;, &#34;Bachelors&#34;, &#34;Married&#34;, &#34;Other/Unknown&#34;, &#34;White&#34;, &#34;Female&#34;, 86, 1], [50, &#34;Other/Unknown&#34;, &#34;HS-grad&#34;, &#34;Married&#34;, &#34;White-Collar&#34;, &#34;White&#34;, &#34;Female&#34;, 20, 1], [66, &#34;Other/Unknown&#34;, &#34;Bachelors&#34;, &#34;Married&#34;, &#34;Professional&#34;, &#34;White&#34;, &#34;Female&#34;, 20, 1]], [[40, &#34;Other/Unknown&#34;, &#34;HS-grad&#34;, &#34;Married&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Male&#34;, 60, 0], [80, &#34;Private&#34;, &#34;HS-grad&#34;, &#34;Married&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Male&#34;, 34, 0], [32, &#34;Private&#34;, &#34;HS-grad&#34;, &#34;Separated&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Male&#34;, 76, 0], [32, &#34;Private&#34;, &#34;HS-grad&#34;, &#34;Married&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Male&#34;, 47, 0], [32, &#34;Private&#34;, &#34;Doctorate&#34;, &#34;Single&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Male&#34;, 60, 0], [90, &#34;Private&#34;, &#34;HS-grad&#34;, &#34;Single&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Male&#34;, 60, 0], [55, &#34;Private&#34;, &#34;HS-grad&#34;, &#34;Married&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Male&#34;, 60, 0], [32, &#34;Private&#34;, &#34;Doctorate&#34;, &#34;Married&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Female&#34;, 60, 0], [32, &#34;Government&#34;, &#34;HS-grad&#34;, &#34;Married&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Male&#34;, 14, 0], [32, &#34;Other/Unknown&#34;, &#34;HS-grad&#34;, &#34;Married&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Male&#34;, 94, 0]], [[74, &#34;Other/Unknown&#34;, &#34;Doctorate&#34;, &#34;Widowed&#34;, &#34;Other/Unknown&#34;, &#34;Other&#34;, &#34;Female&#34;, 27, 1], [74, &#34;Other/Unknown&#34;, &#34;Bachelors&#34;, &#34;Married&#34;, &#34;Other/Unknown&#34;, &#34;Other&#34;, &#34;Female&#34;, 93, 1], [74, &#34;Other/Unknown&#34;, &#34;Doctorate&#34;, &#34;Widowed&#34;, &#34;Other/Unknown&#34;, &#34;Other&#34;, &#34;Female&#34;, 55, 1], [74, &#34;Other/Unknown&#34;, &#34;Bachelors&#34;, &#34;Married&#34;, &#34;Professional&#34;, &#34;Other&#34;, &#34;Female&#34;, 35, 1], [74, &#34;Other/Unknown&#34;, &#34;Doctorate&#34;, &#34;Widowed&#34;, &#34;Blue-Collar&#34;, &#34;Other&#34;, &#34;Female&#34;, 35, 1], [74, &#34;Other/Unknown&#34;, &#34;Doctorate&#34;, &#34;Widowed&#34;, &#34;Other/Unknown&#34;, &#34;Other&#34;, &#34;Female&#34;, 31, 1], [74, &#34;Private&#34;, &#34;Bachelors&#34;, &#34;Married&#34;, &#34;Other/Unknown&#34;, &#34;Other&#34;, &#34;Female&#34;, 35, 1], [74, &#34;Other/Unknown&#34;, &#34;Doctorate&#34;, &#34;Widowed&#34;, &#34;Other/Unknown&#34;, &#34;Other&#34;, &#34;Female&#34;, 79, 1], [74, &#34;Other/Unknown&#34;, &#34;Bachelors&#34;, &#34;Widowed&#34;, &#34;Other/Unknown&#34;, &#34;White&#34;, &#34;Female&#34;, 23, 1], [56, &#34;Other/Unknown&#34;, &#34;Bachelors&#34;, &#34;Married&#34;, &#34;Other/Unknown&#34;, &#34;Other&#34;, &#34;Female&#34;, 35, 1]], [[71, &#34;Government&#34;, &#34;Doctorate&#34;, &#34;Single&#34;, &#34;White-Collar&#34;, &#34;White&#34;, &#34;Female&#34;, 40, 1], [87, &#34;Private&#34;, &#34;Doctorate&#34;, &#34;Single&#34;, &#34;White-Collar&#34;, &#34;White&#34;, &#34;Female&#34;, 40, 1], [78, &#34;Private&#34;, &#34;HS-grad&#34;, &#34;Single&#34;, &#34;White-Collar&#34;, &#34;White&#34;, &#34;Male&#34;, 67, 1], [32, &#34;Private&#34;, &#34;HS-grad&#34;, &#34;Married&#34;, &#34;White-Collar&#34;, &#34;White&#34;, &#34;Female&#34;, 40, 1], [26, &#34;Private&#34;, &#34;HS-grad&#34;, &#34;Single&#34;, &#34;White-Collar&#34;, &#34;Other&#34;, &#34;Male&#34;, 94, 1], [44, &#34;Other/Unknown&#34;, &#34;Doctorate&#34;, &#34;Single&#34;, &#34;White-Collar&#34;, &#34;White&#34;, &#34;Female&#34;, 40, 1], [49, &#34;Private&#34;, &#34;Masters&#34;, &#34;Married&#34;, &#34;White-Collar&#34;, &#34;White&#34;, &#34;Female&#34;, 40, 1], [44, &#34;Private&#34;, &#34;HS-grad&#34;, &#34;Single&#34;, &#34;White-Collar&#34;, &#34;White&#34;, &#34;Male&#34;, 48, 1], [49, &#34;Private&#34;, &#34;Doctorate&#34;, &#34;Single&#34;, &#34;White-Collar&#34;, &#34;White&#34;, &#34;Female&#34;, 55, 1], [26, &#34;Private&#34;, &#34;HS-grad&#34;, &#34;Single&#34;, &#34;White-Collar&#34;, &#34;Other&#34;, &#34;Male&#34;, 97, 1]], [[50, &#34;Self-Employed&#34;, &#34;Doctorate&#34;, &#34;Single&#34;, &#34;Sales&#34;, &#34;White&#34;, &#34;Male&#34;, 45, 1], [27, &#34;Self-Employed&#34;, &#34;Masters&#34;, &#34;Married&#34;, &#34;Sales&#34;, &#34;White&#34;, &#34;Male&#34;, 45, 1], [67, &#34;Self-Employed&#34;, &#34;Prof-school&#34;, &#34;Single&#34;, &#34;Sales&#34;, &#34;White&#34;, &#34;Male&#34;, 45, 0], [50, &#34;Self-Employed&#34;, &#34;Prof-school&#34;, &#34;Single&#34;, &#34;Sales&#34;, &#34;White&#34;, &#34;Male&#34;, 45, 1], [72, &#34;Self-Employed&#34;, &#34;Prof-school&#34;, &#34;Single&#34;, &#34;Sales&#34;, &#34;White&#34;, &#34;Male&#34;, 45, 0], [48, &#34;Self-Employed&#34;, &#34;Prof-school&#34;, &#34;Single&#34;, &#34;Sales&#34;, &#34;White&#34;, &#34;Male&#34;, 45, 1], [48, &#34;Private&#34;, &#34;HS-grad&#34;, &#34;Single&#34;, &#34;Sales&#34;, &#34;White&#34;, &#34;Male&#34;, 45, 1], [51, &#34;Private&#34;, &#34;HS-grad&#34;, &#34;Single&#34;, &#34;Sales&#34;, &#34;White&#34;, &#34;Male&#34;, 45, 0], [48, &#34;Self-Employed&#34;, &#34;Masters&#34;, &#34;Single&#34;, &#34;Sales&#34;, &#34;White&#34;, &#34;Male&#34;, 45, 1], [49, &#34;Self-Employed&#34;, &#34;Doctorate&#34;, &#34;Single&#34;, &#34;Sales&#34;, &#34;White&#34;, &#34;Male&#34;, 45, 1]], [[65, &#34;Private&#34;, &#34;Some-college&#34;, &#34;Married&#34;, &#34;Blue-Collar&#34;, &#34;White&#34;, &#34;Female&#34;, 60, 0], [36, &#34;Private&#34;, &#34;HS-grad&#34;, &#34;Married&#34;, &#34;Other/Unknown&#34;, &#34;White&#34;, &#34;Male&#34;, 60, 0], [36, &#34;Private&#34;, &#34;Some-college&#34;, &#34;Married&#34;, &#34;Blue-Collar&#34;, &#34;White&#34;, &#34;Male&#34;, 50, 0], [36, &#34;Private&#34;, &#34;Some-college&#34;, &#34;Married&#34;, &#34;Blue-Collar&#34;, &#34;White&#34;, &#34;Female&#34;, 23, 0], [90, &#34;Private&#34;, &#34;Some-college&#34;, &#34;Married&#34;, &#34;Blue-Collar&#34;, &#34;Other&#34;, &#34;Male&#34;, 60, 0], [36, &#34;Private&#34;, &#34;Some-college&#34;, &#34;Married&#34;, &#34;Blue-Collar&#34;, &#34;White&#34;, &#34;Male&#34;, 38, 0], [36, &#34;Private&#34;, &#34;School&#34;, &#34;Married&#34;, &#34;Professional&#34;, &#34;White&#34;, &#34;Male&#34;, 60, 0], [36, &#34;Self-Employed&#34;, &#34;Some-college&#34;, &#34;Married&#34;, &#34;Blue-Collar&#34;, &#34;White&#34;, &#34;Male&#34;, 49, 0], [89, &#34;Private&#34;, &#34;Some-college&#34;, &#34;Married&#34;, &#34;Blue-Collar&#34;, &#34;White&#34;, &#34;Female&#34;, 60, 0], [66, &#34;Other/Unknown&#34;, &#34;Some-college&#34;, &#34;Married&#34;, &#34;Blue-Collar&#34;, &#34;White&#34;, &#34;Male&#34;, 60, 0]], [[46, &#34;Private&#34;, &#34;Assoc&#34;, &#34;Single&#34;, &#34;Sales&#34;, &#34;White&#34;, &#34;Male&#34;, 60, 1], [69, &#34;Private&#34;, &#34;Prof-school&#34;, &#34;Single&#34;, &#34;Professional&#34;, &#34;White&#34;, &#34;Female&#34;, 60, 1], [83, &#34;Private&#34;, &#34;Doctorate&#34;, &#34;Single&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Female&#34;, 60, 1], [32, &#34;Private&#34;, &#34;Assoc&#34;, &#34;Married&#34;, &#34;White-Collar&#34;, &#34;White&#34;, &#34;Female&#34;, 60, 1], [50, &#34;Private&#34;, &#34;Doctorate&#34;, &#34;Single&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Female&#34;, 60, 1], [55, &#34;Private&#34;, &#34;Doctorate&#34;, &#34;Single&#34;, &#34;Service&#34;, &#34;Other&#34;, &#34;Female&#34;, 60, 1], [44, &#34;Private&#34;, &#34;Doctorate&#34;, &#34;Single&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Female&#34;, 60, 1], [32, &#34;Private&#34;, &#34;Masters&#34;, &#34;Divorced&#34;, &#34;White-Collar&#34;, &#34;White&#34;, &#34;Female&#34;, 60, 1], [32, &#34;Self-Employed&#34;, &#34;Assoc&#34;, &#34;Married&#34;, &#34;White-Collar&#34;, &#34;White&#34;, &#34;Female&#34;, 60, 0], [55, &#34;Private&#34;, &#34;Doctorate&#34;, &#34;Single&#34;, &#34;Service&#34;, &#34;White&#34;, &#34;Female&#34;, 60, 1]]], &#34;local_importance&#34;: [[0.4, 0.0, 0.3, 0.6, 0.0, 0.2, 0.0, 0.5], [0.4, 0.0, 0.4, 0.3, 0.5, 0.2, 0.1, 0.1], [0.4, 0.0, 0.8, 0.0, 0.1, 0.0, 0.0, 0.6], [0.4, 0.0, 0.8, 0.1, 0.3, 0.0, 0.0, 0.3], [0.4, 0.3, 0.2, 0.3, 0.0, 0.0, 0.1, 0.5], [0.1, 0.1, 0.5, 0.4, 0.2, 0.1, 0.0, 0.6], [0.8, 0.2, 0.5, 0.2, 0.0, 0.2, 0.4, 0.5], [0.9, 0.2, 0.8, 0.1, 0.0, 0.0, 0.0, 0.0], [0.4, 0.2, 0.2, 0.0, 0.2, 0.1, 0.3, 0.4], [0.7, 0.1, 0.7, 0.3, 0.5, 0.1, 0.1, 0.0]], &#34;summary_importance&#34;: [0.49, 0.11, 0.52, 0.23, 0.18, 0.09, 0.1, 0.35], &#34;data_interface&#34;: {&#34;outcome_name&#34;: &#34;income&#34;, &#34;data_df&#34;: &#34;dummy_data&#34;}, &#34;feature_names&#34;: [&#34;age&#34;, &#34;workclass&#34;, &#34;education&#34;, &#34;marital_status&#34;, &#34;occupation&#34;, &#34;race&#34;, &#34;gender&#34;, &#34;hours_per_week&#34;], &#34;feature_names_including_target&#34;: [&#34;age&#34;, &#34;workclass&#34;, &#34;education&#34;, &#34;marital_status&#34;, &#34;occupation&#34;, &#34;race&#34;, &#34;gender&#34;, &#34;hours_per_week&#34;, &#34;income&#34;], &#34;model_type&#34;: &#34;classifier&#34;, &#34;desired_class&#34;: 1, &#34;desired_range&#34;: null, &#34;metadata&#34;: {&#34;version&#34;: &#34;2.0&#34;}}
</pre></div></div>
</div>
</section>
<section id="Convert-the-json-output-to-a-counterfactual-object">
<h2>Convert the json output to a counterfactual object<a class="headerlink" href="#Convert-the-json-output-to-a-counterfactual-object" title="Link to this heading"></a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">imp_r</span> <span class="o">=</span> <span class="n">imp</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>
<span class="nb">print</span><span class="p">([</span><span class="n">o</span><span class="o">.</span><span class="n">visualize_as_dataframe</span><span class="p">(</span><span class="n">show_only_changes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">imp_r</span><span class="o">.</span><span class="n">cf_examples_list</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">imp_r</span><span class="o">.</span><span class="n">local_importance</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">imp_r</span><span class="o">.</span><span class="n">summary_importance</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Query instance (original outcome : 1)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>workclass</th>
      <th>education</th>
      <th>marital_status</th>
      <th>occupation</th>
      <th>race</th>
      <th>gender</th>
      <th>hours_per_week</th>
      <th>income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>47</td>
      <td>Other/Unknown</td>
      <td>Bachelors</td>
      <td>Married</td>
      <td>Other/Unknown</td>
      <td>White</td>
      <td>Male</td>
      <td>36</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Counterfactual set (new outcome: 1)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>workclass</th>
      <th>education</th>
      <th>marital_status</th>
      <th>occupation</th>
      <th>race</th>
      <th>gender</th>
      <th>hours_per_week</th>
      <th>income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>23</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>Other</td>
      <td>-</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>Other</td>
      <td>-</td>
      <td>12</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>Separated</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>55</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>28</td>
      <td>-</td>
      <td>-</td>
      <td>Separated</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>64</td>
      <td>-</td>
      <td>-</td>
      <td>Widowed</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>-</td>
      <td>-</td>
      <td>School</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>96</td>
      <td>0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>-</td>
      <td>-</td>
      <td>School</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>34</td>
      <td>0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>-</td>
      <td>-</td>
      <td>HS-grad</td>
      <td>Widowed</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>Single</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>73</td>
      <td>0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>19</td>
      <td>-</td>
      <td>-</td>
      <td>Separated</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Query instance (original outcome : 1)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>workclass</th>
      <th>education</th>
      <th>marital_status</th>
      <th>occupation</th>
      <th>race</th>
      <th>gender</th>
      <th>hours_per_week</th>
      <th>income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>51</td>
      <td>Self-Employed</td>
      <td>Masters</td>
      <td>Married</td>
      <td>White-Collar</td>
      <td>White</td>
      <td>Male</td>
      <td>50</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Counterfactual set (new outcome: 1)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>workclass</th>
      <th>education</th>
      <th>marital_status</th>
      <th>occupation</th>
      <th>race</th>
      <th>gender</th>
      <th>hours_per_week</th>
      <th>income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-</td>
      <td>-</td>
      <td>HS-grad</td>
      <td>-</td>
      <td>Blue-Collar</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>28</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>Female</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-</td>
      <td>-</td>
      <td>School</td>
      <td>-</td>
      <td>-</td>
      <td>Other</td>
      <td>-</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>Blue-Collar</td>
      <td>-</td>
      <td>-</td>
      <td>24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>21</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>Other/Unknown</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>Widowed</td>
      <td>Service</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>28</td>
      <td>-</td>
      <td>Bachelors</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>Separated</td>
      <td>Blue-Collar</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>-</td>
      <td>-</td>
      <td>HS-grad</td>
      <td>-</td>
      <td>-</td>
      <td>Other</td>
      <td>-</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>85</td>
      <td>-</td>
      <td>-</td>
      <td>Single</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Query instance (original outcome : 0)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>workclass</th>
      <th>education</th>
      <th>marital_status</th>
      <th>occupation</th>
      <th>race</th>
      <th>gender</th>
      <th>hours_per_week</th>
      <th>income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>38</td>
      <td>Self-Employed</td>
      <td>HS-grad</td>
      <td>Married</td>
      <td>Service</td>
      <td>White</td>
      <td>Male</td>
      <td>80</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Counterfactual set (new outcome: 1)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>workclass</th>
      <th>education</th>
      <th>marital_status</th>
      <th>occupation</th>
      <th>race</th>
      <th>gender</th>
      <th>hours_per_week</th>
      <th>income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>78</td>
      <td>-</td>
      <td>Some-college</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-</td>
      <td>-</td>
      <td>Masters</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>87</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-</td>
      <td>-</td>
      <td>Doctorate</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>86</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-</td>
      <td>-</td>
      <td>Some-college</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>90</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>77</td>
      <td>-</td>
      <td>Masters</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>5</th>
      <td>87</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>61</td>
      <td>1</td>
    </tr>
    <tr>
      <th>6</th>
      <td>78</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>63</td>
      <td>1</td>
    </tr>
    <tr>
      <th>7</th>
      <td>-</td>
      <td>-</td>
      <td>Doctorate</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>8</th>
      <td>-</td>
      <td>-</td>
      <td>Masters</td>
      <td>-</td>
      <td>White-Collar</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>9</th>
      <td>-</td>
      <td>-</td>
      <td>Masters</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>65</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Query instance (original outcome : 0)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>workclass</th>
      <th>education</th>
      <th>marital_status</th>
      <th>occupation</th>
      <th>race</th>
      <th>gender</th>
      <th>hours_per_week</th>
      <th>income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>66</td>
      <td>Other/Unknown</td>
      <td>HS-grad</td>
      <td>Married</td>
      <td>Other/Unknown</td>
      <td>White</td>
      <td>Female</td>
      <td>20</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Counterfactual set (new outcome: 1)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>workclass</th>
      <th>education</th>
      <th>marital_status</th>
      <th>occupation</th>
      <th>race</th>
      <th>gender</th>
      <th>hours_per_week</th>
      <th>income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-</td>
      <td>-</td>
      <td>Doctorate</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-</td>
      <td>-</td>
      <td>Doctorate</td>
      <td>-</td>
      <td>White-Collar</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-</td>
      <td>-</td>
      <td>Doctorate</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>15</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>37</td>
      <td>-</td>
      <td>Some-college</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-</td>
      <td>-</td>
      <td>Doctorate</td>
      <td>Widowed</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>5</th>
      <td>73</td>
      <td>-</td>
      <td>Doctorate</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>6</th>
      <td>56</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>40</td>
      <td>1</td>
    </tr>
    <tr>
      <th>7</th>
      <td>-</td>
      <td>-</td>
      <td>Bachelors</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>86</td>
      <td>1</td>
    </tr>
    <tr>
      <th>8</th>
      <td>50</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>White-Collar</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>9</th>
      <td>-</td>
      <td>-</td>
      <td>Bachelors</td>
      <td>-</td>
      <td>Professional</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Query instance (original outcome : 1)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>workclass</th>
      <th>education</th>
      <th>marital_status</th>
      <th>occupation</th>
      <th>race</th>
      <th>gender</th>
      <th>hours_per_week</th>
      <th>income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>32</td>
      <td>Private</td>
      <td>HS-grad</td>
      <td>Married</td>
      <td>Service</td>
      <td>White</td>
      <td>Male</td>
      <td>60</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Counterfactual set (new outcome: 1)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>workclass</th>
      <th>education</th>
      <th>marital_status</th>
      <th>occupation</th>
      <th>race</th>
      <th>gender</th>
      <th>hours_per_week</th>
      <th>income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>40</td>
      <td>Other/Unknown</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>80</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>34</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>Separated</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>76</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>47</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-</td>
      <td>-</td>
      <td>Doctorate</td>
      <td>Single</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>90</td>
      <td>-</td>
      <td>-</td>
      <td>Single</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>55</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>-</td>
      <td>-</td>
      <td>Doctorate</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>Female</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>-</td>
      <td>Government</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>14</td>
      <td>0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>-</td>
      <td>Other/Unknown</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>94</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Query instance (original outcome : 0)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>workclass</th>
      <th>education</th>
      <th>marital_status</th>
      <th>occupation</th>
      <th>race</th>
      <th>gender</th>
      <th>hours_per_week</th>
      <th>income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>74</td>
      <td>Other/Unknown</td>
      <td>Bachelors</td>
      <td>Widowed</td>
      <td>Other/Unknown</td>
      <td>Other</td>
      <td>Female</td>
      <td>35</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Counterfactual set (new outcome: 1)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>workclass</th>
      <th>education</th>
      <th>marital_status</th>
      <th>occupation</th>
      <th>race</th>
      <th>gender</th>
      <th>hours_per_week</th>
      <th>income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-</td>
      <td>-</td>
      <td>Doctorate</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>27</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>Married</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>93</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-</td>
      <td>-</td>
      <td>Doctorate</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>55</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>Married</td>
      <td>Professional</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-</td>
      <td>-</td>
      <td>Doctorate</td>
      <td>-</td>
      <td>Blue-Collar</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>5</th>
      <td>-</td>
      <td>-</td>
      <td>Doctorate</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>31</td>
      <td>1</td>
    </tr>
    <tr>
      <th>6</th>
      <td>-</td>
      <td>Private</td>
      <td>-</td>
      <td>Married</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>7</th>
      <td>-</td>
      <td>-</td>
      <td>Doctorate</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>79</td>
      <td>1</td>
    </tr>
    <tr>
      <th>8</th>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>White</td>
      <td>-</td>
      <td>23</td>
      <td>1</td>
    </tr>
    <tr>
      <th>9</th>
      <td>56</td>
      <td>-</td>
      <td>-</td>
      <td>Married</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Query instance (original outcome : 0)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>workclass</th>
      <th>education</th>
      <th>marital_status</th>
      <th>occupation</th>
      <th>race</th>
      <th>gender</th>
      <th>hours_per_week</th>
      <th>income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>26</td>
      <td>Private</td>
      <td>HS-grad</td>
      <td>Single</td>
      <td>White-Collar</td>
      <td>White</td>
      <td>Female</td>
      <td>40</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Counterfactual set (new outcome: 1)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>workclass</th>
      <th>education</th>
      <th>marital_status</th>
      <th>occupation</th>
      <th>race</th>
      <th>gender</th>
      <th>hours_per_week</th>
      <th>income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>71</td>
      <td>Government</td>
      <td>Doctorate</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>87</td>
      <td>-</td>
      <td>Doctorate</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>78</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>Male</td>
      <td>67</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>32</td>
      <td>-</td>
      <td>-</td>
      <td>Married</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>Other</td>
      <td>Male</td>
      <td>94</td>
      <td>1</td>
    </tr>
    <tr>
      <th>5</th>
      <td>44</td>
      <td>Other/Unknown</td>
      <td>Doctorate</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>6</th>
      <td>49</td>
      <td>-</td>
      <td>Masters</td>
      <td>Married</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>7</th>
      <td>44</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>Male</td>
      <td>48</td>
      <td>1</td>
    </tr>
    <tr>
      <th>8</th>
      <td>49</td>
      <td>-</td>
      <td>Doctorate</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>55</td>
      <td>1</td>
    </tr>
    <tr>
      <th>9</th>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>Other</td>
      <td>Male</td>
      <td>97</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Query instance (original outcome : 0)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>workclass</th>
      <th>education</th>
      <th>marital_status</th>
      <th>occupation</th>
      <th>race</th>
      <th>gender</th>
      <th>hours_per_week</th>
      <th>income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>27</td>
      <td>Self-Employed</td>
      <td>HS-grad</td>
      <td>Single</td>
      <td>Sales</td>
      <td>White</td>
      <td>Male</td>
      <td>45</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Counterfactual set (new outcome: 1)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>workclass</th>
      <th>education</th>
      <th>marital_status</th>
      <th>occupation</th>
      <th>race</th>
      <th>gender</th>
      <th>hours_per_week</th>
      <th>income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>50</td>
      <td>-</td>
      <td>Doctorate</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-</td>
      <td>-</td>
      <td>Masters</td>
      <td>Married</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>67</td>
      <td>-</td>
      <td>Prof-school</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>3</th>
      <td>50</td>
      <td>-</td>
      <td>Prof-school</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>72</td>
      <td>-</td>
      <td>Prof-school</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>5</th>
      <td>48</td>
      <td>-</td>
      <td>Prof-school</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>6</th>
      <td>48</td>
      <td>Private</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>7</th>
      <td>51</td>
      <td>Private</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>8</th>
      <td>48</td>
      <td>-</td>
      <td>Masters</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>9</th>
      <td>49</td>
      <td>-</td>
      <td>Doctorate</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Query instance (original outcome : 1)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>workclass</th>
      <th>education</th>
      <th>marital_status</th>
      <th>occupation</th>
      <th>race</th>
      <th>gender</th>
      <th>hours_per_week</th>
      <th>income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>36</td>
      <td>Private</td>
      <td>Some-college</td>
      <td>Married</td>
      <td>Blue-Collar</td>
      <td>White</td>
      <td>Male</td>
      <td>60</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Counterfactual set (new outcome: 1)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>workclass</th>
      <th>education</th>
      <th>marital_status</th>
      <th>occupation</th>
      <th>race</th>
      <th>gender</th>
      <th>hours_per_week</th>
      <th>income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>65</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>Female</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-</td>
      <td>-</td>
      <td>HS-grad</td>
      <td>-</td>
      <td>Other/Unknown</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>50</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>Female</td>
      <td>23</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>90</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>Other</td>
      <td>-</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>38</td>
      <td>0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>-</td>
      <td>-</td>
      <td>School</td>
      <td>-</td>
      <td>Professional</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>-</td>
      <td>Self-Employed</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>49</td>
      <td>0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>89</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>Female</td>
      <td>-</td>
      <td>0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>66</td>
      <td>Other/Unknown</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Query instance (original outcome : 0)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>workclass</th>
      <th>education</th>
      <th>marital_status</th>
      <th>occupation</th>
      <th>race</th>
      <th>gender</th>
      <th>hours_per_week</th>
      <th>income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>32</td>
      <td>Private</td>
      <td>Assoc</td>
      <td>Single</td>
      <td>Service</td>
      <td>White</td>
      <td>Female</td>
      <td>60</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Counterfactual set (new outcome: 1)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>workclass</th>
      <th>education</th>
      <th>marital_status</th>
      <th>occupation</th>
      <th>race</th>
      <th>gender</th>
      <th>hours_per_week</th>
      <th>income</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>46</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>Sales</td>
      <td>-</td>
      <td>Male</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>69</td>
      <td>-</td>
      <td>Prof-school</td>
      <td>-</td>
      <td>Professional</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>83</td>
      <td>-</td>
      <td>Doctorate</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>Married</td>
      <td>White-Collar</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>50</td>
      <td>-</td>
      <td>Doctorate</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>5</th>
      <td>55</td>
      <td>-</td>
      <td>Doctorate</td>
      <td>-</td>
      <td>-</td>
      <td>Other</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>6</th>
      <td>44</td>
      <td>-</td>
      <td>Doctorate</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>7</th>
      <td>-</td>
      <td>-</td>
      <td>Masters</td>
      <td>Divorced</td>
      <td>White-Collar</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
    <tr>
      <th>8</th>
      <td>-</td>
      <td>Self-Employed</td>
      <td>-</td>
      <td>Married</td>
      <td>White-Collar</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>9</th>
      <td>55</td>
      <td>-</td>
      <td>Doctorate</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[None, None, None, None, None, None, None, None, None, None]
[{&#39;marital_status&#39;: 0.6, &#39;hours_per_week&#39;: 0.5, &#39;age&#39;: 0.4, &#39;education&#39;: 0.3, &#39;race&#39;: 0.2, &#39;workclass&#39;: 0.0, &#39;occupation&#39;: 0.0, &#39;gender&#39;: 0.0}, {&#39;occupation&#39;: 0.5, &#39;age&#39;: 0.4, &#39;education&#39;: 0.4, &#39;marital_status&#39;: 0.3, &#39;race&#39;: 0.2, &#39;gender&#39;: 0.1, &#39;hours_per_week&#39;: 0.1, &#39;workclass&#39;: 0.0}, {&#39;education&#39;: 0.8, &#39;hours_per_week&#39;: 0.6, &#39;age&#39;: 0.4, &#39;occupation&#39;: 0.1, &#39;workclass&#39;: 0.0, &#39;marital_status&#39;: 0.0, &#39;race&#39;: 0.0, &#39;gender&#39;: 0.0}, {&#39;education&#39;: 0.8, &#39;age&#39;: 0.4, &#39;occupation&#39;: 0.3, &#39;hours_per_week&#39;: 0.3, &#39;marital_status&#39;: 0.1, &#39;workclass&#39;: 0.0, &#39;race&#39;: 0.0, &#39;gender&#39;: 0.0}, {&#39;hours_per_week&#39;: 0.5, &#39;age&#39;: 0.4, &#39;workclass&#39;: 0.3, &#39;marital_status&#39;: 0.3, &#39;education&#39;: 0.2, &#39;gender&#39;: 0.1, &#39;occupation&#39;: 0.0, &#39;race&#39;: 0.0}, {&#39;hours_per_week&#39;: 0.6, &#39;education&#39;: 0.5, &#39;marital_status&#39;: 0.4, &#39;occupation&#39;: 0.2, &#39;age&#39;: 0.1, &#39;workclass&#39;: 0.1, &#39;race&#39;: 0.1, &#39;gender&#39;: 0.0}, {&#39;age&#39;: 0.8, &#39;education&#39;: 0.5, &#39;hours_per_week&#39;: 0.5, &#39;gender&#39;: 0.4, &#39;workclass&#39;: 0.2, &#39;marital_status&#39;: 0.2, &#39;race&#39;: 0.2, &#39;occupation&#39;: 0.0}, {&#39;age&#39;: 0.9, &#39;education&#39;: 0.8, &#39;workclass&#39;: 0.2, &#39;marital_status&#39;: 0.1, &#39;occupation&#39;: 0.0, &#39;race&#39;: 0.0, &#39;gender&#39;: 0.0, &#39;hours_per_week&#39;: 0.0}, {&#39;age&#39;: 0.4, &#39;hours_per_week&#39;: 0.4, &#39;gender&#39;: 0.3, &#39;workclass&#39;: 0.2, &#39;education&#39;: 0.2, &#39;occupation&#39;: 0.2, &#39;race&#39;: 0.1, &#39;marital_status&#39;: 0.0}, {&#39;age&#39;: 0.7, &#39;education&#39;: 0.7, &#39;occupation&#39;: 0.5, &#39;marital_status&#39;: 0.3, &#39;workclass&#39;: 0.1, &#39;race&#39;: 0.1, &#39;gender&#39;: 0.1, &#39;hours_per_week&#39;: 0.0}]
{&#39;education&#39;: 0.52, &#39;age&#39;: 0.49, &#39;hours_per_week&#39;: 0.35, &#39;marital_status&#39;: 0.23, &#39;occupation&#39;: 0.18, &#39;workclass&#39;: 0.11, &#39;gender&#39;: 0.1, &#39;race&#39;: 0.09}
</pre></div></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="DiCE_getting_started.html" class="btn btn-neutral float-left" title="Quick introduction to generating counterfactual explanations using DiCE" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="DiCE_multiclass_classification_and_regression.html" class="btn btn-neutral float-right" title="Generating counterfactuals for multi-class classification and regression models" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Ramaravind, Amit, Chenhao.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>